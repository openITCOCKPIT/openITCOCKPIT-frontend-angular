<ng-container *transloco="let t">
    @if (!summary) {
        <c-row>
            <c-col [xs]="12" [md]="6" [lg]="3" [xl]="2" [offset]="{xl: 2, lg: 0, md:0, xs:0}">
                <oitc-block-loader [height]="'8rem'"></oitc-block-loader>
            </c-col>
            <c-col [xs]="12" [md]="6" [lg]="3" [xl]="2">
                <oitc-block-loader [height]="'8rem'"></oitc-block-loader>
            </c-col>
            <c-col [xs]="12" [md]="6" [lg]="3" [xl]="2">
                <oitc-block-loader [height]="'8rem'"></oitc-block-loader>
            </c-col>
            <c-col [xs]="12" [md]="6" [lg]="3" [xl]="2">
                <oitc-block-loader [height]="'8rem'"></oitc-block-loader>
            </c-col>
            <c-col [xs]="12" [md]="6" [lg]="3" [xl]="2">
                <oitc-block-loader [height]="'8rem'"></oitc-block-loader>
            </c-col>
        </c-row>
    } @else {
        <c-row class="equal-height-row d-flex flex-wrap">
            <c-col [xs]="12" [md]="6" [lg]="3" [xl]="2" class="text-start">
                <button type="button"
                        class="btn btn-primary text-white ripple p-2 w-100">
                    @switch (os_family()) {
                        @case ('linux') {
                            <fa-icon [icon]="['fab', 'linux']" [size]="'7x'"></fa-icon>
                            <br>
                            {{ t('Linux') }}
                        }
                        @case ('windows') {
                            <fa-icon [icon]="['fab', 'windows']" [size]="'7x'"></fa-icon>
                            <br>
                            {{ t('Windows') }}
                        }
                        @case ('macos') {
                            <fa-icon [icon]="['fab', 'apple']" [size]="'7x'"></fa-icon>
                            <br>
                            {{ t('macOS') }}
                        }
                        @default {
                            <fa-icon [icon]="['fab', 'linux']" [size]="'7x'"></fa-icon>
                            <br>
                            {{ t('Linux') }}
                        }
                    }

                </button>
            </c-col>
            <c-col [xs]="12" [md]="6" [lg]="3" [xl]="2">
                <c-widget-stat-f
                    [title]="String(summary.total | localNumber)"
                    [value]="'Packages' | transloco"
                    class="mb-3"
                    padding>
                    <ng-template cTemplateId="widgetIconTemplate">
                        <fa-icon [icon]="['fas', 'cubes']" [cTextColor]="'primary'" [size]="'2xl'"></fa-icon>
                    </ng-template>
                    <ng-template cTemplateId="widgetFooterTemplate">
                        <c-row>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'linux']" [cTextColor]="'primary'"></fa-icon>
                                <a *oitcPermission="['packages', 'linux']"
                                   [routerLink]="['/', 'packages', 'linux']">
                                    {{ summary.linux.totalPackages }}
                                </a>

                            </c-col>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'windows']" [cTextColor]="'primary'"></fa-icon>
                                <a *oitcPermission="['packages', 'windows']"
                                   [routerLink]="['/', 'packages', 'windows']">
                                    {{ summary.windows.totalPackages }}
                                </a>
                            </c-col>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'apple']" [cTextColor]="'primary'"></fa-icon>
                                <a *oitcPermission="['packages', 'macos']"
                                   [routerLink]="['/', 'packages', 'macos']">
                                    {{ summary.macos.totalPackages }}
                                </a>
                            </c-col>
                        </c-row>
                    </ng-template>
                </c-widget-stat-f>
            </c-col>
            <c-col [xs]="12" [md]="6" [lg]="3" [xl]="2">
                <c-widget-stat-f
                    [value]="'Outdated Packages' | transloco"
                    [title]="String(summary.outdated | localNumber)"
                    class="mb-3"
                    padding>
                    <ng-template cTemplateId="widgetIconTemplate">
                        <fa-icon [icon]="['fas', 'triangle-exclamation']" [cTextColor]="'warning'"
                                 [size]="'2xl'"></fa-icon>
                    </ng-template>
                    <ng-template cTemplateId="widgetFooterTemplate">
                        <c-row>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'linux']" [cTextColor]="'primary'"></fa-icon>
                                <a *oitcPermission="['packages', 'linux']"
                                   [routerLink]="['/', 'packages', 'linux']"
                                   [queryParams]="{'filter[available_updates]': 1}">
                                    {{ summary.linux.updatesAvailable }}
                                </a>
                            </c-col>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'windows']" [cTextColor]="'primary'"></fa-icon>
                                <a *oitcPermission="['packages', 'windows_updates']"
                                   [routerLink]="['/', 'packages', 'windows_updates']"
                                   [queryParams]="{'filter[available_updates]': 1}">
                                    {{ summary.windows.updatesAvailable }}
                                </a>

                            </c-col>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'apple']" [cTextColor]="'primary'"></fa-icon>
                                <a *oitcPermission="['packages', 'macos_updates']"
                                   [routerLink]="['/', 'packages', 'macos_updates']"
                                   [queryParams]="{'filter[available_updates]': 1}">
                                    {{ summary.macos.updatesAvailable }}
                                </a>
                            </c-col>
                        </c-row>
                    </ng-template>
                </c-widget-stat-f>
            </c-col>
            <c-col [xs]="12" [md]="6" [lg]="3" [xl]="2">
                <c-widget-stat-f
                    [value]="'Security Packages' | transloco"
                    [title]="String(summary.security | localNumber)"
                    class="mb-3"
                    padding>
                    <ng-template cTemplateId="widgetIconTemplate" class="me-0">
                        <fa-icon [icon]="['fas', 'shield']" [cTextColor]="'danger'" [size]="'2xl'"></fa-icon>
                    </ng-template>
                    <ng-template cTemplateId="widgetFooterTemplate">
                        <c-row>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'linux']" [cTextColor]="'primary'"></fa-icon>
                                <a *oitcPermission="['packages', 'linux']"
                                   [routerLink]="['/', 'packages', 'linux']"
                                   [queryParams]="{'filter[available_security_updates]': 1}">
                                    {{ summary.linux.securityUpdates | localNumber }}
                                </a>
                            </c-col>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'windows']" [cTextColor]="'primary'"></fa-icon>
                                <a *oitcPermission="['packages', 'windows_updates']"
                                   [routerLink]="['/', 'packages', 'windows_updates']"
                                   [queryParams]="{'filter[available_security_updates]': 1}">
                                    {{ summary.windows.securityUpdates | localNumber }}
                                </a>

                            </c-col>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'apple']" [cTextColor]="'primary'"></fa-icon>
                                <a *oitcPermission="['packages', 'macos_updates']"
                                   [routerLink]="['/', 'packages', 'macos_updates']"
                                   [queryParams]="{'filter[available_security_updates]': 1}">
                                    {{ summary.macos.securityUpdates | localNumber }}
                                </a>
                            </c-col>
                        </c-row>
                    </ng-template>
                </c-widget-stat-f>
            </c-col>
            <c-col [xs]="12" [md]="6" [lg]="3" [xl]="2">
                <c-widget-stat-f
                    [value]="'Outdated Hosts' | transloco"
                    [title]="String(summary.outdated_hosts | localNumber)"
                    class="mb-3"
                    padding>
                    <ng-template cTemplateId="widgetIconTemplate">
                        <fa-icon [icon]="['fas', 'server']" [cTextColor]="'warning'" [size]="'2xl'"></fa-icon>
                    </ng-template>
                    <ng-template cTemplateId="widgetFooterTemplate">
                        <c-row>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'linux']" [cTextColor]="'primary'"></fa-icon>
                                @if (this.PermissionsService.hasPermissionObservable(['patchstatus', 'index'])|async) {
                                    <a [routerLink]="['/', 'patchstatus', 'index']"
                                       [queryParams]="{host_id: summary.linux.hostsWithUpdates}">
                                        {{ summary.linux.hostsWithUpdates.length | localNumber }}
                                    </a>
                                } @else {
                                    {{ summary.linux.hostsWithUpdates.length | localNumber }}
                                }
                            </c-col>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'windows']" [cTextColor]="'primary'"></fa-icon>
                                @if (this.PermissionsService.hasPermissionObservable(['patchstatus', 'index'])|async) {
                                    <a [routerLink]="['/', 'patchstatus', 'index']"
                                       [queryParams]="{host_id: summary.windows.hostsWithUpdates}">
                                        {{ summary.windows.hostsWithUpdates.length | localNumber }}
                                    </a>
                                } @else {
                                    {{ summary.windows.hostsWithUpdates.length | localNumber }}
                                }
                            </c-col>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'apple']" [cTextColor]="'primary'"></fa-icon>
                                @if (this.PermissionsService.hasPermissionObservable(['patchstatus', 'index'])|async) {
                                    <a [routerLink]="['/', 'patchstatus', 'index']"
                                       [queryParams]="{host_id: summary.macos.hostsWithUpdates}">
                                        {{ summary.macos.hostsWithUpdates.length | localNumber }}
                                    </a>
                                } @else {
                                    {{ summary.macos.hostsWithUpdates.length | localNumber }}
                                }
                            </c-col>
                        </c-row>
                    </ng-template>
                </c-widget-stat-f>
            </c-col>
            <c-col [xs]="12" [md]="6" [lg]="3" [xl]="2">
                <c-widget-stat-f
                    [value]="'Security relevant Hosts' | transloco"
                    [title]="String(summary.security_hosts | localNumber)"
                    class="mb-3"
                    padding>
                    <ng-template cTemplateId="widgetIconTemplate">
                        <fa-icon [icon]="['fas', 'server']" [cTextColor]="'danger'" [size]="'2xl'"></fa-icon>
                    </ng-template>
                    <ng-template cTemplateId="widgetFooterTemplate">
                        <c-row>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'linux']" [cTextColor]="'primary'"></fa-icon>
                                @if (this.PermissionsService.hasPermissionObservable(['patchstatus', 'index'])|async) {
                                    <a [routerLink]="['/', 'patchstatus', 'index']"
                                       [queryParams]="{host_id: summary.linux.hostsWithSecurityUpdates}">
                                        {{ summary.linux.hostsWithSecurityUpdates.length | localNumber }}
                                    </a>
                                } @else {
                                    {{ summary.linux.hostsWithSecurityUpdates.length | localNumber }}
                                }
                            </c-col>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'windows']" [cTextColor]="'primary'"></fa-icon>
                                @if (this.PermissionsService.hasPermissionObservable(['patchstatus', 'index'])|async) {
                                    <a [routerLink]="['/', 'patchstatus', 'index']"
                                       [queryParams]="{host_id: summary.windows.hostsWithSecurityUpdates}">
                                        {{ summary.windows.hostsWithSecurityUpdates.length | localNumber }}
                                    </a>
                                } @else {
                                    {{ summary.windows.hostsWithSecurityUpdates.length | localNumber }}
                                }
                            </c-col>
                            <c-col class="text-center px-0">
                                <fa-icon [icon]="['fab', 'apple']" [cTextColor]="'primary'"></fa-icon>
                                @if (this.PermissionsService.hasPermissionObservable(['patchstatus', 'index'])|async) {
                                    <a [routerLink]="['/', 'patchstatus', 'index']"
                                       [queryParams]="{host_id: summary.macos.hostsWithSecurityUpdates}">
                                        {{ summary.macos.hostsWithSecurityUpdates.length | localNumber }}
                                    </a>
                                } @else {
                                    {{ summary.macos.hostsWithSecurityUpdates.length | localNumber }}
                                }
                            </c-col>
                        </c-row>
                    </ng-template>
                </c-widget-stat-f>
            </c-col>
        </c-row>
    }
</ng-container>
