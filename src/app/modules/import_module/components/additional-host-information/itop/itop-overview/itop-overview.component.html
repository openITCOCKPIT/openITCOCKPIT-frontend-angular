<ng-container *transloco="let t">
    <c-row>
        <c-col [xs]="12">
            <h4>
                {{ t('iTop overview') }}
                <sup>
                    <small>
                        <oitc-online-offline [isOnline]="result.response.status"></oitc-online-offline>
                    </small>
                </sup>
            </h4>
        </c-col>
    </c-row>

    @if (result.response.status) {
        <c-row>
            <c-col [xs]="12">
                <c-card class="mb-3">
                    <c-card-header>
                        <h5 cCardTitle>{{ t('Configuration item') }}
                            <small class="fw-300">
                                {{ t('details') }}
                            </small>
                        </h5>
                        <c-nav variant="underline" class="card-toolbar card-header-pills me-3">
                            <c-nav-item>
                                <a
                                    (click)="setSelectedTab('information')"
                                    *oitcPermission="['ImportModule', 'ExternalSystems', 'additionalHostInformation']"
                                    class="nav-link"
                                    [ngClass]="{'active': selectedTab == 'information'}">
                                    <fa-icon [icon]="['fas', 'list-ul']"></fa-icon>
                                    {{ t('Information') }}
                                </a>
                            </c-nav-item>
                            <c-nav-item>
                                <a
                                    (click)="setSelectedTab('dependencyTree')"
                                    *oitcPermission="['ImportModule', 'ExternalSystems', 'dependencyTree']"
                                    class="nav-link"
                                    [ngClass]="{'active': selectedTab == 'dependencyTree'}">
                                    <fa-icon [icon]="['fas', 'sitemap']" [rotate]="270"></fa-icon>
                                    {{ t('iTop Dependency tree') }}
                                </a>
                            </c-nav-item>
                        </c-nav>
                    </c-card-header>
                    @if (selectedTab == 'information') {
                        <c-card-body>
                            @if (!result.response.customClass) {
                                <c-row
                                >
                                    @switch (result.response.general_information?.finalclass?.value) {
                                        @case ('VirtualMachine') {
                                            <oitc-virtual-machine [result]="result"></oitc-virtual-machine>
                                        }
                                        @case ('NetworkDevice') {
                                            <oitc-network-device [result]="result"></oitc-network-device>
                                        }
                                        @case ('Server') {
                                            <oitc-server [result]="result"></oitc-server>
                                        }
                                        @default {
                                            <oitc-default [result]="result"></oitc-default>
                                        }
                                    }
                                </c-row>
                            }
                            @if (result.response.customClass) {
                                <c-row
                                >
                                    @switch (result.response.general_information?.finalclass?.value) {
                                        @case ('WANLine') {
                                            <oitc-wan-line [result]="result"></oitc-wan-line>
                                        }
                                        @default {
                                            <oitc-custom-class [result]="result"></oitc-custom-class>
                                        }
                                    }
                                </c-row>
                            }
                        </c-card-body>
                    }
                    @if (selectedTab == 'dependencyTree') {
                        <c-card-body>
                            <oitc-dependency-tree
                                [objectId]="hostId"
                                [type]="'host'"
                                [name]="hostname"></oitc-dependency-tree>
                        </c-card-body>
                    }
                </c-card>
            </c-col>
        </c-row>
    }

</ng-container>
